<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.52">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Nick Belgau, Oscar Hernandez Mata">
<meta name="dcterms.date" content="2024-07-18">

<title>Capstone - Principal Component Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  
  <script>
    (function () {
      var script = document.createElement("script");
      script.type = "text/javascript";
      script.src  = "https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js";
      document.getElementsByTagName("head")[0].appendChild(script);
    })();
  </script>


<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Capstone - Principal Component Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Nick Belgau, Oscar Hernandez Mata </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 18, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">Introduction</h2>
<p>Across diverse industries and data science applications, Principal Component Analysis (PCA) offers a powerful solution to extracting valuable insights from complex datasets. The primary objective of PCA is to reduce the number of dimensions in the dataset while retaining most of the original information. This is directly applicable to big data scenarios where it is not feasible to rely on univariate analysis to find patterns, and redundancy in the data leads to inflated standard errors and poor model stability <span class="citation" data-cites="rahayu2017application">(<a href="#ref-rahayu2017application" role="doc-biblioref">Rahayu et al. 2017</a>)</span>.</p>
<p>Developed by Karl Pearson in 1901, PCA utilizes linear algebra to transform the original dataset to a lower dimensional vector space of uncorrelated variables known as principal components. These are linear combinations of the original variables, and represent the information in a new coordinate system with axes aligned to the directions of maximum variability <span class="citation" data-cites="joshi2020prediction">(<a href="#ref-joshi2020prediction" role="doc-biblioref">Joshi and Patil 2020</a>)</span>. Most of the data lies in this new feature subspace, where variance is used to measure the amount of information it contains. The quality of this subspace is assessed by comparing its variance to the total variance of the entire dataset, helping PCA identify the main structure in the data <span class="citation" data-cites="marukatat2023tutorial">(<a href="#ref-marukatat2023tutorial" role="doc-biblioref">Marukatat 2023</a>)</span>.</p>
<p>PCA is often used during exploratory data analysis because this technique enables graphical visualization of the dataset. This can reveal unexpected relationships between the original variables that would otherwise be challenging to identify <span class="citation" data-cites="johnson2023applied">(<a href="#ref-johnson2023applied" role="doc-biblioref">Johnson and Wichern 2023</a>)</span>. By reducing the dimensionality, PCA simplifies the data structure, making it easier to interpret and analyze. As a result, trends, patterns, and outliers can be identified in the new reduced-dimension dataset <span class="citation" data-cites="richardson2009pca">(<a href="#ref-richardson2009pca" role="doc-biblioref">Richardson 2009</a>)</span>.</p>
<p>Additionally, PCA is a powerful tool to address the curse of dimensionality and the main problem areas associated with high dimensionality: data sparsity, multicollinearity, and overfitting <span class="citation" data-cites="altman2018curse">(<a href="#ref-altman2018curse" role="doc-biblioref">Altman and Krzywinski 2018</a>)</span>. By projecting the data onto the principal components, the density of data points is increased in the new vector space which makes it easier to detect patterns and reduce noise. Multicollinearity is mitigated in the process because the principal components are uncorrelated to each other which improves stability and performance of the predictive models <span class="citation" data-cites="bharadiya2023tutorial">(<a href="#ref-bharadiya2023tutorial" role="doc-biblioref">Bharadiya 2023</a>)</span>. With dimensionality reduction, models become simpler which improves generalization and reduces overfitting.</p>
<p>These benefits become valuable in many real-world applications, including image compression and signal processing. Lengthy image transfer over the internet can be improved by factoring image pixel matrices to extract the main patterns with minimal information loss <span class="citation" data-cites="ng2017pca">(<a href="#ref-ng2017pca" role="doc-biblioref">Ng 2017</a>)</span>. For image processing tasks and particularly in edge-computing applications, PCA can file size by 60% with minimal information loss <span class="citation" data-cites="ali2024dimensionality">(<a href="#ref-ali2024dimensionality" role="doc-biblioref">Ali, Wassif, and Bayomi 2024</a>)</span>. This is especially useful for real-time quality control systems with deployed ML models in advanced manufacturing environments. For signal processing, PCA can be used to identify the underlying structure and relevant features in signals amongst the noise.</p>
<p>In machine learning pipelines, PCA is often employed because reducing the number of dimensions decreases computational complexity, lowers memory requirements, and enhances algorithm efficiency. Additionally, PCA‚Äôs feature extraction capabilities allow for a better understanding and interpretation of the underlying data structure by identifying the most influential variables <span class="citation" data-cites="bharadiya2023tutorial">(<a href="#ref-bharadiya2023tutorial" role="doc-biblioref">Bharadiya 2023</a>)</span>. It effectively filters out noise and irrelevant variations, enhancing the signal-to-noise ratio and improving the performance of subsequent analyses. Using PCA in both the training and deployment stages ensures consistent data transformation, maintains model stability, and boosts prediction speed by working with fewer, more informative features.</p>
<p>As with every technique, PCA has a few inherent limitations. It assumes linearity which means that if nonlinear relationships exist, PCA will not as effective because it may fail to capture the underlying structure in the data. However, modern variations such as Kernal PCA seeks to address this <span class="citation" data-cites="marukatat2023tutorial">(<a href="#ref-marukatat2023tutorial" role="doc-biblioref">Marukatat 2023</a>)</span>. Interpretability is another considerable downside because the resulting principal components are combinations of the original variables. PCA is also sensitive to outliers, which can distort the variance-covariance structure and affect the quality of dimensionality reduction. However, there have been improvements to address outlier sensitivity such as Robust PCA which decomposes the data into a low-rank matrix and sparse matrix to separate signal and noise <span class="citation" data-cites="bharadiya2023tutorial">(<a href="#ref-bharadiya2023tutorial" role="doc-biblioref">Bharadiya 2023</a>)</span>.</p>
<p>Additionally, PCA results in some degree of information loss, as the lower-dimensional representation will not retain all details from the original data. More specifically, in image compression, PCA can lead to loss of fine details and subtle features in images, especially when a high compression rate is applied. In addition, the computation of eigenvectors and eigenvalues, especially for large images, can be resource intensive and time-consuming <span class="citation" data-cites="do2012pca">(<a href="#ref-do2012pca" role="doc-biblioref">Do Esp√≠rito Santo 2012</a>)</span>. Lastly, selecting the optimal number of components to retain is subjective; choosing too few can lead to significant information loss, while choosing too many can lead to overfitting or unnecessary complexity.</p>
<p>Despite these drawbacks, PCA is crucial in data science for its ability to simplify complex datasets, reduce computational costs, and enhance the interpretability of data by focusing on the most significant features. It offers a powerful tool for improving model performance, reducing noise, and uncovering hidden patterns, making it indispensable for efficient and insightful data analysis.</p>
</section>
<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<section id="linear-algebra-foundations" class="level3">
<h3 class="anchored" data-anchor-id="linear-algebra-foundations">Linear Algebra Foundations</h3>
<p>Principal Component Analysis (PCA) simplifies multivariate data by transforming the original potentially correlated variables into a smaller set of uncorrelated variables called principal components. The aim of PCA is to reduce the dataset‚Äôs dimensionality while preserving as much variability as possible. Because the variables will often have different scales or units, standardization is crucial to ensure each variable contributes equally to the analysis. Principal components are obtained by identifying the directions of maximum variability in the data. These components are orthogonal and uncorrelated, with each one capturing a specific amount of the data‚Äôs variance. This process creates a new coordinate system that simplifies the data structure while retaining its essential characteristics <span class="citation" data-cites="johnson2023applied">(<a href="#ref-johnson2023applied" role="doc-biblioref">Johnson and Wichern 2023</a>)</span>.</p>
<p>While different methods can be used to determine the principal components, Singular Value Decomposition (SVD) is the most common due to its computational efficiency and numerical stability which makes it a popular choice for popular programming packages. SVD decomposes the data into three simpler matrices, making it possible to handle large datasets effectively. This decomposition allows for a more straightforward calculation of the principal components without explicitly computing the covariance matrix, which can be computationally expensive and numerically unstable. The ability to handle sparse and dense matrices further enhances its versatility and efficiency in diverse applications. These advantages make SVD a preferred method in popular programming packages, ensuring that PCA is performed quickly and accurately.</p>
</section>
<section id="overview-of-algorithm-with-svd" class="level3">
<h3 class="anchored" data-anchor-id="overview-of-algorithm-with-svd">Overview of Algorithm with SVD:</h3>
<ol type="1">
<li><p><strong>Standardize the data</strong><br>
Ensure each variable contributes equally by having a mean of zero and variance of one. This requires that the variables are continuous. <span class="math display">\[
X_{\text{standardized}} = \frac{X - \mu}{\sigma}
\]</span> <span class="math inline">\(\mu\)</span>: mean, <span class="math inline">\(\sigma\)</span>: standard deviation of each variable</p></li>
<li><p><strong>Perform Singular Value Decomposition (SVD)</strong><br>
Decompose the standardized data matrix into three matrices <span class="math inline">\(U\)</span>, <span class="math inline">\(\Sigma\)</span>, and <span class="math inline">\(V^T\)</span>. <span class="math display">\[
  X_{\text{standardized}} = U \Sigma V^T
  \]</span> <span class="math inline">\(ùëà\)</span> and <span class="math inline">\(V^T\)</span> are orthogonal matrices, so therefore <span class="math inline">\(U\)</span> and <span class="math inline">\(V\)</span> are also orthogonal. The diagonal matrix of singular values is represented by <span class="math inline">\(\sigma\)</span> with values <span class="math inline">\(\sigma_i\)</span> that are naturally sorted in descending order. Each column of <span class="math inline">\(ùëâ\)</span> represents a principal component (PC) which are orthogonal to each other in the transformed feature space. The number of PC‚Äôs initially generated are equivalent to the number of variables initially provided in the dataset.</p></li>
<li><p><strong>Selection of principal components</strong><br>
The explained variance of each PC is represented by: <span class="math display">\[
  \text{variance\_explained} = \frac{\sigma_i^2}{\sum \sigma_i^2}
  \]</span> For each singular value <span class="math inline">\(\sigma_i\)</span> in the matrix of singular values <span class="math inline">\(\Sigma\)</span>, compute <span class="math inline">\(\sigma_i^2\)</span> and calculate the individual variance. The cumulative explained variance target is specified (typically 95%) as a criteria for PC selection. Determine the number of components needs to reach the desired cumulative explained variance.</p></li>
<li><p><strong>Transform the data</strong><br>
Project the standardized data onto the selected principal components. <span class="math display">\[
  X_{\text{transformed}} = X_{\text{standardized}} V_{\text{selected}}
  \]</span> where <span class="math inline">\(V_{\text{selected}}\)</span> contains the first number of components columns of <span class="math inline">\(V\)</span>. Once the data is transformed onto the selected PC‚Äôs, it is effectively reduced in dimensionality while retaining most of its original variability.</p></li>
</ol>
</section>
<section id="assumptions-and-practical-testing" class="level3">
<h3 class="anchored" data-anchor-id="assumptions-and-practical-testing">Assumptions and Practical Testing</h3>
<p>This section covers the primary assumptions of PCA and details how they can be tested in real-world applications. A more accurate name for this section might be <em>requirements</em> since the effectiveness of PCA relies on satisfying these points.</p>
<section id="linearity" class="level4">
<h4 class="anchored" data-anchor-id="linearity">1. Linearity</h4>
<p><strong>Assumption</strong>: PCA assumes that resulting principal components are linear combinations of the original variables. Nonlinear relationships may lead to low covariance values which can lead to an undervalued representation of their signficance.</p>
<p><strong>Testing</strong>: Initial checks with scatter plots and correlation matrices can help identify linear relationships between variable pairs. While common, these methods require manual inspection which introduces the potential for the researcher to miss subtler non-linear patterns. Supplementing with statistical tests for linearity can provide a more robust assessment. Transformations can be applied to specific non-linear variables or alternative PCA methods can be utilized such as Kernal PCA <span class="citation" data-cites="marukatat2023tutorial">(<a href="#ref-marukatat2023tutorial" role="doc-biblioref">Marukatat 2023</a>)</span>.</p>
<section id="continuous-data" class="level5">
<h5 class="anchored" data-anchor-id="continuous-data">2. Continuous data</h5>
<p><strong>Assumption</strong>: To calculate principal components, data should be on a continuous scale: either interval or ratio. It should be mentioned that despite being ordinal, Likert Scales are often used because the distance between scale points are assumed to be approximately equivalent.</p>
<p><strong>Testing</strong>: Reviewing column data types and value counts are practical methods for testing. Simple transformations can be applied to categorical data.</p>
</section>
</section>
<section id="data-standardization" class="level4">
<h4 class="anchored" data-anchor-id="data-standardization">3. Data standardization</h4>
<p><strong>Assumption</strong>: There are three critical preprocessing steps: scaling, mean-centering, and outlier handling. Scaling standardizes the variance of each variable to ensure equal contributions. Mean-centering has a similar impact: ensuring that the principal components capture the true direction of maximum variance. Outliers can also distort the principal components, so they should be identified and handled appropriately. Together these methods prevent variables with larger measured values from dominating the principal components and skewing results.</p>
<p><strong>Testing</strong>: Data will usually not arrive in a condition that meets this requirement. Luckily, statistical packages in common programming languages offer simple methods to scale and mean-center data. Outliers can be detected using a variety of distribution plots, but automated methods could be employed for larger datasets which is beyond the scope of this paper.</p>
<p>! need to add Varimax, and what loadings are</p>
</section>
</section>
</section>
<section id="applications-analysis-and-results" class="level2">
<h2 class="anchored" data-anchor-id="applications-analysis-and-results">Applications: Analysis and Results</h2>
<section id="application-1-general-dimensionality-reduction" class="level3">
<h3 class="anchored" data-anchor-id="application-1-general-dimensionality-reduction">Application 1: General Dimensionality Reduction</h3>
<p>Load required ibaries:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(GGally)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DescTools)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reshape2)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(factoextra)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rrcov)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol type="1">
<li><strong>Dataset Description</strong></li>
</ol>
<p>The dataset contains demographic, health, and environmental metrics for counties in Florida (FL) and Georgia (GA). Each row represents data for a specific county, and the selected columns are:</p>
<ul>
<li>County: Name of the county.</li>
<li>State: State abbreviation (FL or GA).</li>
<li>obesity_age_adj: Age-adjusted obesity rate.</li>
<li>Smoking_Rate: Rate of smoking within the population.</li>
<li>physical_inactivity: Rate of physical inactivity.</li>
<li>Diabetes: Diabetes prevalence rate.</li>
<li>Heart_Disease: Heart disease prevalence rate.</li>
<li>Cancer: Cancer prevalence rate.</li>
<li>NATA_Cancer_11: National-Scale Air Toxics Assessment (NATA) cancer risk for 2011.</li>
<li>Poverty_Percent: Percentage of the population living below the poverty line.</li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://raw.githubusercontent.com/nickbelgau/STA6257_PCA/main/data/Alz_mortality_data_complete_with_state_csv.csv"</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>data_raw <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(url)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ncol</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<ol start="2" type="1">
<li><strong>Filtered Dataset and Inspection</strong></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="st">"County"</span>, <span class="st">"State"</span>, <span class="st">"obesity_age_adj"</span>, <span class="st">"Smoking_Rate"</span>, <span class="st">"physical_inactivity"</span>, <span class="st">"Diabetes"</span>, <span class="st">"Heart_Disease"</span>, <span class="st">"Cancer"</span>, <span class="st">"Glyphosates"</span>, <span class="st">"Fine_PM_2_5"</span>, <span class="st">"Mercury_TPY"</span>, <span class="st">"Lead_TPY"</span>, <span class="st">"per_rural"</span>, <span class="st">"Food_index"</span>, <span class="st">"Poverty_Percent"</span>, <span class="st">"Atrazine_High_KG"</span>, <span class="st">"SUNLIGHT"</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>deep_south_states <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"AL"</span>, <span class="st">"AR"</span>, <span class="st">"FL"</span>, <span class="st">"GA"</span>, <span class="st">"LA"</span>, <span class="st">"MS"</span>, <span class="st">"NC"</span>, <span class="st">"SC"</span>, <span class="st">"TN"</span>, <span class="st">"TX"</span>, <span class="st">"VA"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data_raw <span class="sc">%&gt;%</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(State <span class="sc">%in%</span> deep_south_states) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">all_of</span>(selected_columns))</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> data <span class="sc">%&gt;%</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>County, <span class="sc">-</span>State)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We filtered the dataset to analyze selected variables for states in the deep south. We remove the columns to denote which county and state the data is from to create one complete dataset for the region.</p>
<p>Columns were selected to remove demographic fields related to gender, sex, and race and ambigious fields related to grouping.</p>
<p>Perform a series of checks to inspect for continuous variables, a requirement of effective PCA.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data, class)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    obesity_age_adj        Smoking_Rate physical_inactivity            Diabetes 
          "numeric"           "numeric"           "numeric"           "numeric" 
      Heart_Disease              Cancer         Glyphosates         Fine_PM_2_5 
          "numeric"           "numeric"           "numeric"           "numeric" 
        Mercury_TPY            Lead_TPY           per_rural          Food_index 
          "numeric"           "numeric"           "numeric"           "numeric" 
    Poverty_Percent    Atrazine_High_KG            SUNLIGHT 
          "numeric"           "numeric"           "numeric" </code></pre>
</div>
</div>
<p>Data types are ‚Äúnumeric‚Äù which is a good indication.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(data, <span class="cf">function</span>(x) <span class="fu">length</span>(<span class="fu">unique</span>(x)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    obesity_age_adj        Smoking_Rate physical_inactivity            Diabetes 
                574                 534                 596                 319 
      Heart_Disease              Cancer         Glyphosates         Fine_PM_2_5 
                774                1127                1106                 975 
        Mercury_TPY            Lead_TPY           per_rural          Food_index 
               1141                1143                 874                  80 
    Poverty_Percent    Atrazine_High_KG            SUNLIGHT 
                288                1024                1141 </code></pre>
</div>
</div>
<p>The columns have a significant amount of unique values which is further indication.</p>
<p>Cursory check to inspect nulls and scales.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">skim</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<table style="width: auto;" class="table table-condensed">
<caption>
Data summary
</caption>
<tbody>
<tr>
<td style="text-align:left;">
Name
</td>
<td style="text-align:left;">
data
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of rows
</td>
<td style="text-align:left;">
1143
</td>
</tr>
<tr>
<td style="text-align:left;">
Number of columns
</td>
<td style="text-align:left;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
_______________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Column type frequency:
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
numeric
</td>
<td style="text-align:left;">
15
</td>
</tr>
<tr>
<td style="text-align:left;">
________________________
</td>
<td style="text-align:left;">
</td>
</tr>
<tr>
<td style="text-align:left;">
Group variables
</td>
<td style="text-align:left;">
None
</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left;">
skim_variable
</th>
<th style="text-align:right;">
n_missing
</th>
<th style="text-align:right;">
complete_rate
</th>
<th style="text-align:right;">
mean
</th>
<th style="text-align:right;">
sd
</th>
<th style="text-align:right;">
p0
</th>
<th style="text-align:right;">
p25
</th>
<th style="text-align:right;">
p50
</th>
<th style="text-align:right;">
p75
</th>
<th style="text-align:right;">
p100
</th>
<th style="text-align:left;">
hist
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
obesity_age_adj
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
31.65
</td>
<td style="text-align:right;">
3.76
</td>
<td style="text-align:right;">
19.00
</td>
<td style="text-align:right;">
29.16
</td>
<td style="text-align:right;">
31.26
</td>
<td style="text-align:right;">
33.95
</td>
<td style="text-align:right;">
46.92
</td>
<td style="text-align:left;">
‚ñÅ‚ñÜ‚ñá‚ñÇ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Smoking_Rate
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
25.06
</td>
<td style="text-align:right;">
3.56
</td>
<td style="text-align:right;">
10.72
</td>
<td style="text-align:right;">
22.94
</td>
<td style="text-align:right;">
25.62
</td>
<td style="text-align:right;">
27.68
</td>
<td style="text-align:right;">
32.86
</td>
<td style="text-align:left;">
‚ñÅ‚ñÅ‚ñÉ‚ñá‚ñÇ
</td>
</tr>
<tr>
<td style="text-align:left;">
physical_inactivity
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
28.54
</td>
<td style="text-align:right;">
4.03
</td>
<td style="text-align:right;">
16.04
</td>
<td style="text-align:right;">
26.07
</td>
<td style="text-align:right;">
28.34
</td>
<td style="text-align:right;">
31.54
</td>
<td style="text-align:right;">
40.06
</td>
<td style="text-align:left;">
‚ñÅ‚ñÉ‚ñá‚ñÖ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Diabetes
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
10.64
</td>
<td style="text-align:right;">
1.62
</td>
<td style="text-align:right;">
6.48
</td>
<td style="text-align:right;">
9.32
</td>
<td style="text-align:right;">
10.56
</td>
<td style="text-align:right;">
11.69
</td>
<td style="text-align:right;">
17.92
</td>
<td style="text-align:left;">
‚ñÇ‚ñá‚ñÜ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Heart_Disease
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
126.68
</td>
<td style="text-align:right;">
38.46
</td>
<td style="text-align:right;">
41.20
</td>
<td style="text-align:right;">
99.90
</td>
<td style="text-align:right;">
120.10
</td>
<td style="text-align:right;">
146.85
</td>
<td style="text-align:right;">
279.20
</td>
<td style="text-align:left;">
‚ñÇ‚ñá‚ñÉ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Cancer
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
187.78
</td>
<td style="text-align:right;">
26.55
</td>
<td style="text-align:right;">
75.33
</td>
<td style="text-align:right;">
170.25
</td>
<td style="text-align:right;">
188.26
</td>
<td style="text-align:right;">
204.40
</td>
<td style="text-align:right;">
370.64
</td>
<td style="text-align:left;">
‚ñÅ‚ñá‚ñÜ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Glyphosates
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
20.14
</td>
<td style="text-align:right;">
37.76
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.79
</td>
<td style="text-align:right;">
4.95
</td>
<td style="text-align:right;">
21.35
</td>
<td style="text-align:right;">
311.54
</td>
<td style="text-align:left;">
‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Fine_PM_2_5
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
11.64
</td>
<td style="text-align:right;">
1.23
</td>
<td style="text-align:right;">
9.02
</td>
<td style="text-align:right;">
10.71
</td>
<td style="text-align:right;">
12.03
</td>
<td style="text-align:right;">
12.55
</td>
<td style="text-align:right;">
14.14
</td>
<td style="text-align:left;">
‚ñÉ‚ñÇ‚ñÖ‚ñá‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Mercury_TPY
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.02
</td>
<td style="text-align:right;">
0.07
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.94
</td>
<td style="text-align:left;">
‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Lead_TPY
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
0.30
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
0.01
</td>
<td style="text-align:right;">
0.04
</td>
<td style="text-align:right;">
0.14
</td>
<td style="text-align:right;">
2.80
</td>
<td style="text-align:left;">
‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
per_rural
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
58.25
</td>
<td style="text-align:right;">
31.31
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
33.75
</td>
<td style="text-align:right;">
61.38
</td>
<td style="text-align:right;">
83.22
</td>
<td style="text-align:right;">
100.00
</td>
<td style="text-align:left;">
‚ñÖ‚ñÉ‚ñÖ‚ñÜ‚ñá
</td>
</tr>
<tr>
<td style="text-align:left;">
Food_index
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
6.60
</td>
<td style="text-align:right;">
1.30
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
5.90
</td>
<td style="text-align:right;">
6.70
</td>
<td style="text-align:right;">
7.40
</td>
<td style="text-align:right;">
10.00
</td>
<td style="text-align:left;">
‚ñÅ‚ñÅ‚ñÉ‚ñá‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Poverty_Percent
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
19.21
</td>
<td style="text-align:right;">
6.67
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
14.90
</td>
<td style="text-align:right;">
18.80
</td>
<td style="text-align:right;">
23.15
</td>
<td style="text-align:right;">
47.70
</td>
<td style="text-align:left;">
‚ñÅ‚ñá‚ñá‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
Atrazine_High_KG
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
4531.16
</td>
<td style="text-align:right;">
24239.04
</td>
<td style="text-align:right;">
0.00
</td>
<td style="text-align:right;">
94.50
</td>
<td style="text-align:right;">
632.80
</td>
<td style="text-align:right;">
3480.10
</td>
<td style="text-align:right;">
768660.60
</td>
<td style="text-align:left;">
‚ñá‚ñÅ‚ñÅ‚ñÅ‚ñÅ
</td>
</tr>
<tr>
<td style="text-align:left;">
SUNLIGHT
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
17689.04
</td>
<td style="text-align:right;">
1037.82
</td>
<td style="text-align:right;">
15389.96
</td>
<td style="text-align:right;">
16897.70
</td>
<td style="text-align:right;">
17723.25
</td>
<td style="text-align:right;">
18285.74
</td>
<td style="text-align:right;">
21671.87
</td>
<td style="text-align:left;">
‚ñÉ‚ñá‚ñÜ‚ñÇ‚ñÅ
</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><strong>Standardize the data</strong></p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">scale</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="3" type="1">
<li><strong>Correlation and Linarity Analysis</strong></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data &lt;- as.data.frame(data)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># par(col.axis="#8B814C", col.lab="#8B814C", col.main="#8B814C", col.sub="#8B814C", pch=20, col="#8B814C", bg="transparent", cex=0.8)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co"># DescTools::PlotPairs(sapply(data, function(x) jitter(x, 5)) ,</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">#                      diag.panel = panel.hist,</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">#                      lower.panel = panel.smooth,</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">#                      upper.panel = panel.smooth,</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co"># )</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Heatmap</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>cor_matrix <span class="ot">&lt;-</span> <span class="fu">cor</span>(data, <span class="at">use =</span> <span class="st">"complete.obs"</span>)  <span class="co"># Handles missing values by using complete observations</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>color_palette <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="fu">c</span>(<span class="st">"#215B9D"</span>, <span class="st">"#DCE6F1"</span>, <span class="st">"#215B9D"</span>))(<span class="dv">200</span>) <span class="co"># blue</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(<span class="fu">abs</span>(cor_matrix), <span class="at">method =</span> <span class="st">"color"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  type = "lower", </span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">order =</span> <span class="st">"hclust"</span>,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">addCoef.col =</span> <span class="st">"#36454F"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">number.cex =</span> <span class="fl">0.50</span>,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">tl.col =</span> <span class="st">"black"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">tl.srt =</span> <span class="dv">45</span>,  <span class="co"># No rotation for text labels</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">#  tl.pos = "d",  # Position text labels at the bottom (x-axis)</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">cl.pos =</span> <span class="st">"n"</span>,  <span class="co"># No color legend</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">col =</span> color_palette,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">bg =</span> <span class="st">"white"</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggpairs(data)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The correlation matrix plots show enough of a relationship between variables to meet the assumption of linearity.</p>
<ol start="4" type="1">
<li><strong>Outliers analysis</strong></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># melted_data &lt;- melt(filtered_data)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co"># # Create boxplots for each variable</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(melted_data, aes(x = variable, y = value)) +</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_boxplot(outlier.colour = "red", outlier.shape = 16, outlier.size = 2) +</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme_minimal() +</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = "Boxplots for Each Variable",</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="co">#        x = "Variable",</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="co">#        y = "Value") +</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">#   theme(axis.text.x = element_text(angle = 45, hjust = 1))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<ol start="5" type="1">
<li><strong>Run Principal Component Analysis</strong></li>
</ol>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pca_result <span class="ot">&lt;-</span> <span class="fu">prcomp</span>(data, <span class="at">center =</span> <span class="cn">TRUE</span>, <span class="at">scale. =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>pca_summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(pca_result)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(pca_summary<span class="sc">$</span>importance)</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>importance <span class="ot">&lt;-</span> <span class="fu">t</span>(importance) <span class="co"># transpose to make cleaner</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(importance) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Std Dev"</span>, <span class="st">"Proportion"</span>, <span class="st">"Cumulative Var"</span>)</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>importance</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>       Std Dev Proportion Cumulative Var
PC1  2.1686117    0.31353        0.31353
PC2  1.4406769    0.13837        0.45190
PC3  1.1990584    0.09585        0.54774
PC4  1.0919610    0.07949        0.62724
PC5  1.0465747    0.07302        0.70026
PC6  0.9085476    0.05503        0.75529
PC7  0.8467668    0.04780        0.80309
PC8  0.7899423    0.04160        0.84469
PC9  0.7502237    0.03752        0.88221
PC10 0.7009094    0.03275        0.91496
PC11 0.6358843    0.02696        0.94192
PC12 0.5689447    0.02158        0.96350
PC13 0.5191019    0.01796        0.98146
PC14 0.4164061    0.01156        0.99302
PC15 0.3234751    0.00698        1.00000</code></pre>
</div>
</div>
<p>View the PCA components (loadings)</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># pca_result$rotation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Screeplot</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(pca_result, <span class="at">type =</span> <span class="st">"l"</span>, <span class="at">col =</span> <span class="st">"#215B9D"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Elbow method</p>
<p>note: from library (ggfortify::autoplot)</p>
<p>Biplot</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># biplot(pca_result, </span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co">#        col = c("grey", "#215B9D"), #"#D3D3D3"</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">#        cex = 0.3,</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co">#        arrow.len = 0.15,              # Length of arrows (default is 0.1)</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co">#        main = "PCA Biplot")  </span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(pca_result, </span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">data =</span> data,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">colour =</span> <span class="st">'grey'</span>,  <span class="co"># Color for points</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">loadings =</span> <span class="cn">TRUE</span>,  <span class="co"># Show loadings</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">loadings.colour =</span> <span class="st">'#215B9D'</span>,  <span class="co"># Color for arrows</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">loadings.label =</span> <span class="cn">TRUE</span>,  <span class="co"># Show labels for loadings</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">loadings.label.colour =</span> <span class="st">'black'</span>, </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">loadings.label.size =</span> <span class="dv">3</span>) <span class="sc">+</span>  <span class="co"># Increase the size of the labels</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span>  <span class="co"># Use a minimal theme for cleaner appearance</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)  <span class="co"># Remove legend for simplicity</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>In one of these applications, discuss how PCA aids in building more robust statistical models by reducing multicollinearity and enhancing model interpretability. Compare VIF (variance inflation factor) before and after PCA.</p>
</section>
<section id="application-2-image-compression" class="level3">
<h3 class="anchored" data-anchor-id="application-2-image-compression">Application 2: Image Compression</h3>
<p>New example. No scree plot or biplot because pixels. Results to focus on memory reduction and maintaining equivalent level of performance. This will be similar to appl 1 + 2 but without going into as much detail for techniques already demonstrated.</p>
</section>
</section>
<section id="conclusion" class="level2">
<h2 class="anchored" data-anchor-id="conclusion">Conclusion</h2>
<p>Summary, reflections, future discissions</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-ali2024dimensionality" class="csl-entry" role="listitem">
Ali, Ibrahim, Khaled Wassif, and Hanaa Bayomi. 2024. <span>‚ÄúDimensionality Reduction for Images of IoT Using Machine Learning.‚Äù</span> <em>Scientific Reports</em> 14: 7205. <a href="https://doi.org/10.1038/s41598-024-57385-4">https://doi.org/10.1038/s41598-024-57385-4</a>.
</div>
<div id="ref-altman2018curse" class="csl-entry" role="listitem">
Altman, Naomi, and Martin Krzywinski. 2018. <span>‚ÄúThe Curse(s) of Dimensionality.‚Äù</span> <em>Nature Methods</em> 15 (6): 397‚Äì400. <a href="https://doi.org/10.1038/s41592-018-0019-x">https://doi.org/10.1038/s41592-018-0019-x</a>.
</div>
<div id="ref-bharadiya2023tutorial" class="csl-entry" role="listitem">
Bharadiya, Jasmin Praful. 2023. <span>‚ÄúA Tutorial on Principal Component Analysis for Dimensionality Reduction in Machine Learning.‚Äù</span> <em>International Journal of Innovative Research in Science Engineering and Technology</em> 8 (5): 2028‚Äì32. <a href="https://doi.org/10.5281/zenodo.8002436">https://doi.org/10.5281/zenodo.8002436</a>.
</div>
<div id="ref-do2012pca" class="csl-entry" role="listitem">
Do Esp√≠rito Santo, Rafael. 2012. <span>‚ÄúPrincipal Component Analysis Applied to Digital Image Compression.‚Äù</span> <em>Einstein</em> 10 (2): 135‚Äì39. <a href="https://doi.org/10.1590/S1679-45082012000200004">https://doi.org/10.1590/S1679-45082012000200004</a>.
</div>
<div id="ref-johnson2023applied" class="csl-entry" role="listitem">
Johnson, Richard, and Dean Wichern. 2023. <em>Applied Multivariate Statistical Analysis</em>. Pearson.
</div>
<div id="ref-joshi2020prediction" class="csl-entry" role="listitem">
Joshi, Ketaki, and Bhushan Patil. 2020. <span>‚ÄúPrediction of Surface Roughness by Machine Vision Using Principal Components Based Regression Analysis.‚Äù</span> <em>Procedia Computer Science</em> 167: 382‚Äì91. <a href="https://doi.org/10.1016/j.procs.2020.03.242">https://doi.org/10.1016/j.procs.2020.03.242</a>.
</div>
<div id="ref-marukatat2023tutorial" class="csl-entry" role="listitem">
Marukatat, Sanparith. 2023. <span>‚ÄúTutorial on PCA and Approximate PCA and Approximate Kernel PCA.‚Äù</span> <em>Artificial Intelligence Review</em> 56: 5445‚Äì77. <a href="https://doi.org/10.1007/s10462-022-10297-z">https://doi.org/10.1007/s10462-022-10297-z</a>.
</div>
<div id="ref-ng2017pca" class="csl-entry" role="listitem">
Ng, S. C. 2017. <span>‚ÄúPrincipal Component Analysis to Reduce Dimension on Digital Image.‚Äù</span> <em>Procedia Computer Science</em> 111: 113‚Äì19. <a href="https://doi.org/10.1016/j.procs.2017.06.017">https://doi.org/10.1016/j.procs.2017.06.017</a>.
</div>
<div id="ref-rahayu2017application" class="csl-entry" role="listitem">
Rahayu, S., T. Sugiarto, L. Madu, Holiawati, and A. Subagyo. 2017. <span>‚ÄúApplication of Principal Component Analysis (PCA) to Reduce Multicollinearity Exchange Rate Currency of Some Countries in Asia Period 2004-2014.‚Äù</span> <em>International Journal of Educational Methodology</em> 3 (2): 75‚Äì83. <a href="https://doi.org/10.12973/ijem.3.2.75">https://doi.org/10.12973/ijem.3.2.75</a>.
</div>
<div id="ref-richardson2009pca" class="csl-entry" role="listitem">
Richardson, Michael. 2009. <em>Principal Component Analysis</em>. <a href="http://www.dsc.ufcg.edu.br/~hmg/disciplinas/posgraduacao/rn-copin-2014.3/material/SignalProcPCA.pdf">http://www.dsc.ufcg.edu.br/~hmg/disciplinas/posgraduacao/rn-copin-2014.3/material/SignalProcPCA.pdf</a>.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>